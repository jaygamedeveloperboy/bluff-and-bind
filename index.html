<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Bluff & Bind</title>
  <link rel="stylesheet" href="styles.css" />
  <link href="https://fonts.googleapis.com/css?family=Cinzel:700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Merriweather:400,700&display=swap" rel="stylesheet">
  <link rel="icon" type="image/png" href="favicon.png">
</head>
<body>
  <div id="home-screen">
    <a href="#" onclick="returnHome()">
      <img src="images/logo.png" alt="Bluff & Bind Logo" id="main-logo" style="max-width: 320px; width: 80%; height: auto; margin: 0 auto; display: block;">
    </a>
    <div class="emoji-picker" style="margin-bottom: 18px; display: flex; justify-content: center; gap: 32px;">
      <div>
        <div style="font-weight:bold; text-align:center; margin-bottom:4px;">Player 1 Emoji:</div>
        <div id="player1-emoji-options" class="emoji-options">
          <span class="emoji-circle" data-player="1" data-emoji="ğŸ¼">ğŸ¼</span>
          <span class="emoji-circle" data-player="1" data-emoji="ğŸ¸">ğŸ¸</span>
          <span class="emoji-circle" data-player="1" data-emoji="ğŸ·">ğŸ·</span>
          <span class="emoji-circle" data-player="1" data-emoji="ğŸ‘">ğŸ‘</span>
          <span class="emoji-circle" data-player="1" data-emoji="ğŸ†">ğŸ†</span>
        </div>
        <div style="margin-top:10px; text-align:center;">
          <label style="font-weight:bold; font-size:1.1em; color:#a62a28;">Pieces of Clothing<br>
            <select id="player1-clothing" style="margin-top:4px; font-size:1em; border-radius:6px; padding:4px 10px;">
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5</option>
              <option value="6">6</option>
              <option value="7">7</option>
              <option value="8">8</option>
              <option value="9">9</option>
              <option value="10">10</option>
            </select>
          </label>
        </div>
      </div>
      <div>
        <div style="font-weight:bold; text-align:center; margin-bottom:4px;">Player 2 Emoji:</div>
        <div id="player2-emoji-options" class="emoji-options">
          <span class="emoji-circle" data-player="2" data-emoji="ğŸ¼">ğŸ¼</span>
          <span class="emoji-circle" data-player="2" data-emoji="ğŸ¸">ğŸ¸</span>
          <span class="emoji-circle" data-player="2" data-emoji="ğŸ·">ğŸ·</span>
          <span class="emoji-circle" data-player="2" data-emoji="ğŸ‘">ğŸ‘</span>
          <span class="emoji-circle" data-player="2" data-emoji="ğŸ†">ğŸ†</span>
        </div>
        <div style="margin-top:10px; text-align:center;">
          <label style="font-weight:bold; font-size:1.1em; color:#a62a28;">Pieces of Clothing<br>
            <select id="player2-clothing" style="margin-top:4px; font-size:1em; border-radius:6px; padding:4px 10px;">
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5</option>
              <option value="6">6</option>
              <option value="7">7</option>
              <option value="8">8</option>
              <option value="9">9</option>
              <option value="10">10</option>
            </select>
          </label>
        </div>
      </div>
    </div>
    <div style="margin: 18px 0; display: flex; justify-content: center; gap: 32px;">
      <label style="font-weight:bold; font-size:1.1em; color:#a62a28;">
        <input type="checkbox" id="cpu-toggle" style="transform:scale(1.3); margin-right:8px;"> Play vs CPU
      </label>
      <label style="font-weight:bold; font-size:1.1em; color:#a62a28;">
        <input type="checkbox" id="party-toggle" style="transform:scale(1.3); margin-right:8px;"> Party Mode ğŸ‰
      </label>
    </div>
    <div id="custom-punishments-area" style="display:none; margin: 18px 0;">
      <div style="margin-bottom: 8px; font-weight: bold; color: #a62a28;">Add Custom Punishments (Party Mode Only):</div>
      <input type="text" id="custom-punishment-input" placeholder="Enter a custom punishment..." style="padding: 6px 12px; border-radius: 6px; border: 1px solid #a62a28; width: 60%; max-width: 340px;">
      <button id="add-custom-punishment-btn" style="margin-left: 8px;">Add</button>
      <ul id="custom-punishments-list" style="margin-top: 10px; text-align: left; max-width: 400px; margin-left: auto; margin-right: auto;"></ul>
    </div>
    <p>Select your game mode:</p>
    <div class="mode-buttons">
      <button onclick="startGame('Easy')" title="Gentle: 8 tokens per player. Light, playful punishments. Good for beginners.">Easy</button>
      <button onclick="startGame('Medium')" title="Standard: 6 tokens per player. Moderate punishments. Balanced challenge.">Medium</button>
      <button onclick="startGame('Hard')" title="Intense: 5 tokens per player. Explicit, challenging punishments. For experienced players.">Hard</button>
      <button onclick="startGame('Extreme')" title="Extreme: 4 tokens per player. Very explicit, high-stakes punishments. For advanced players only.">Extreme</button>
    </div>
    <button id="tutorial-btn" onclick="showTutorial()">How to Play</button>
  </div>

  <div id="tutorial-screen" class="hidden">
    <h2>How to Play Bluff & Bind</h2>
    <div class="tutorial-content">
      <ol>
        <li><b>Setup:</b> Each player starts with tokens based on the chosen difficulty. Decide who is Player 1 and Player 2 (or play vs CPU!).</li>
        <li><b>Objective:</b> Be the last player with tokens remaining.</li>
        <li><b>Taking Turns:</b> Each round, both players secretly choose one of five actions:</li>
        <ul style="margin-bottom: 0.5em;">
          <li><b>Attack</b> ğŸ—¡ï¸</li>
          <li><b>Defend</b> ğŸ›¡ï¸</li>
          <li><b>Submit</b> ğŸ™‡</li>
          <li><b>Trap</b> ğŸ•¸ï¸</li>
          <li><b>Wild</b> ğŸ² (once per game)</li>
        </ul>
        <li>After both have chosen, reveal your cards!</li>
        <li><b>Card Effects:</b></li>
        <ul style="margin-bottom: 0.5em;">
          <li><b>Attack:</b> Strong win against Submit. <b>Strong loss</b> against Defend. <b>Normal loss</b> against Trap.</li>
          <li><b>Defend:</b> Strong win against Attack. <b>Normal win</b> against Wild. <b>Normal loss</b> against Trap. <b>Normal loss</b> against Submit.</li>
          <li><b>Submit:</b> Strong win against Trap. <b>Normal loss</b> against Defend. <b>Strong loss</b> against Attack. <i>Win with Submit to earn a random perk!</i></li>
          <li><b>Trap:</b> Strong win against Attack and Defend. <b>Normal loss</b> against Submit.</li>
          <li><b>Wild:</b> Wins against everything. <b>Strong win</b> against Submit (perk + higher punishment). <b>Normal win</b> against Attack, Defend, or Trap. If both play Wild, both lose a token, are punished, and gain a perk.</li>
        </ul>
        <li><b>Card Locking:</b> If you play the same card twice in a row, that card becomes locked and cannot be played on your next turn. After skipping one turn, the card unlocks and can be used again.</li>
        <li><b>Losing Tokens & Punishments:</b></li>
        <ul style="margin-bottom: 0.5em;">
          <li>If you lose a round, you may lose a token (sometimes half or quarter of a token).</li>
          <li><b>Every time you lose a hand, you receive a punishmentâ€”regardless of how much token you lost.</b></li>
          <li><b>You only remove an article of clothing when a full token is lost.</b></li>
          <li>If you don't want to do a punishment, you can forfeit it by losing a token instead.</li>
        </ul>
        <li><b>Perks:</b> Win a round with Submit, or if both play Wild, and you'll get a random perk:</li>
        <ul style="margin-bottom: 0.5em;">
          <li><b>Control:</b> Force your opponent's next move.</li>
          <li><b>Reverse:</b> Reverse the outcome of a round.</li>
          <li><b>Trap:</b> Set a trap for your opponent's next move.</li>
        </ul>
        <li><b>Winning the Game:</b> The last player with tokens wins! If both lose their last token in the same round, it's a draw.</li>
      </ol>
      <div style="margin-top:12px;">
        <b>Quick Example Round:</b>
        <ol>
          <li>Both players secretly pick a card.</li>
          <li>Reveal cards and resolve the outcome.</li>
          <li>Apply any token loss, perks, or punishments.</li>
          <li>If you played the same card twice in a row, it's now locked for your next turn.</li>
          <li>Repeat until one player runs out of tokens.</li>
        </ol>
      </div>
      <div style="margin-top:10px;"><b>Tip:</b> Bluff, strategize, and watch your opponent's patterns. Save your Wild card for a crucial moment!</div>
    </div>
    <button onclick="hideTutorial()">Start Playing</button>
  </div>

  <div id="game-screen" class="hidden">
    <button id="home-button" onclick="returnHome()">ğŸ </button>
    <a href="#" onclick="returnHome()">
      <img src="images/logo.png" alt="Bluff & Bind Logo" id="main-logo" style="max-width: 240px; width: 60%; height: auto; margin: 0 auto 10px auto; display: block;">
    </a>
    <h3 id="mode">Mode: </h3>
    <div id="turn-indicator" class="turn-indicator">Player 1's Turn</div>

    <!-- Player 1 Section -->
    <div id="player1" style="position: relative;">
      <div class="player-info">
        <div class="token-display">
          <img src="images/token.png" alt="Token" class="token-icon" />
          <span id="player1-tokens">5</span>
        </div>
        <p>Perks: <span id="player1-perks">None</span></p>
      </div>
      <div class="last-turn-info" id="player1-last-turn"></div>
      <div class="game-area">
        <div id="player1-card-grid" class="card-grid">
          <div class="card">
            <img src="images/attack.png" alt="Attack" onclick="selectCard('ATTACK')" />
            <div class="card-tooltip">Strong against: Submit&#10;Weak against: Defend&#10;Counters: Trap, Wild</div>
          </div>
          <div class="card">
            <img src="images/defend.png" alt="Defend" onclick="selectCard('DEFEND')" />
            <div class="card-tooltip">Strong against: Attack, Wild&#10;Weak against: Submit&#10;Counters: Trap</div>
          </div>
          <div class="card">
            <img src="images/submit.png" alt="Submit" onclick="selectCard('SUBMIT')" />
            <div class="card-tooltip">Strong against: Defend&#10;Weak against: Attack, Wild&#10;Counters: Trap</div>
          </div>
          <div class="card">
            <img src="images/trap.png" alt="Trap" onclick="selectCard('TRAP')" />
            <div class="card-tooltip">Strong against: Attack, Submit, Wild&#10;Weak against: Defend</div>
          </div>
          <div class="card wildcard">
            <img src="images/wildcard.png" alt="Wildcard" onclick="selectCard('WILD')" />
            <div class="card-tooltip">Trumps every card. <b>Strong win (perk) vs Submit.</b> Normal win vs Attack, Defend, Trap. If both play Wild, both lose a token and are punished.</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Player 2 Section -->
    <div id="player2" class="hidden" style="position: relative;">
      <div class="player-info">
        <div class="token-display">
          <img src="images/token.png" alt="Token" class="token-icon" />
          <span id="player2-tokens">5</span>
        </div>
        <p>Perks: <span id="player2-perks">None</span></p>
      </div>
      <div class="last-turn-info" id="player2-last-turn"></div>
      <div class="game-area">
        <div id="player2-card-grid" class="card-grid">
          <div class="card">
            <img src="images/attack.png" alt="Attack" onclick="selectCard('ATTACK')" />
            <div class="card-tooltip">Strong against: Submit&#10;Weak against: Defend&#10;Counters: Trap, Wild</div>
          </div>
          <div class="card">
            <img src="images/defend.png" alt="Defend" onclick="selectCard('DEFEND')" />
            <div class="card-tooltip">Strong against: Attack, Wild&#10;Weak against: Submit&#10;Counters: Trap</div>
          </div>
          <div class="card">
            <img src="images/submit.png" alt="Submit" onclick="selectCard('SUBMIT')" />
            <div class="card-tooltip">Strong against: Defend&#10;Weak against: Attack, Wild&#10;Counters: Trap</div>
          </div>
          <div class="card">
            <img src="images/trap.png" alt="Trap" onclick="selectCard('TRAP')" />
            <div class="card-tooltip">Strong against: Attack, Submit, Wild&#10;Weak against: Defend</div>
          </div>
          <div class="card wildcard">
            <img src="images/wildcard.png" alt="Wildcard" onclick="selectCard('WILD')" />
            <div class="card-tooltip">Trumps every card. <b>Strong win (perk) vs Submit.</b> Normal win vs Attack, Defend, Trap. If both play Wild, both lose a token and are punished.</div>
          </div>
        </div>
      </div>
    </div>

    <div id="round-result" class="hidden">
      <div id="round-result-header" class="round-result-header"></div>
      <div class="results-panels">
        <div class="player-result-panel" id="player1-result-panel">
          <div class="player-label">Player 1</div>
          <div class="result-avatar" id="player1-avatar"></div>
          <div class="result-tokens" id="player1-result-tokens"></div>
          <div class="result-perks" id="player1-result-perks"></div>
          <div class="result-punishment" id="player1-result-punishment"></div>
        </div>
        <div class="player-result-panel" id="player2-result-panel">
          <div class="player-label">Player 2</div>
          <div class="result-avatar" id="player2-avatar"></div>
          <div class="result-tokens" id="player2-result-tokens"></div>
          <div class="result-perks" id="player2-result-perks"></div>
          <div class="result-punishment" id="player2-result-punishment"></div>
        </div>
      </div>
      <div id="punishment-choice-area"></div>
      <div id="punishment-wheel-embed" class="hidden" style="margin: 0 auto 24px auto; max-width: 400px; text-align: center;">
        <h2 style="color:#FFD700;text-align:center;margin-bottom:18px;">Punishment Wheel</h2>
        <canvas id="punishment-wheel-canvas" width="340" height="340" style="display:block;margin:0 auto 18px auto;"></canvas>
        <button id="spin-punishment-wheel-btn" style="font-size:1.2em;">Spin the Wheel</button>
        <div id="punishment-wheel-result" style="margin-top:18px;font-size:1.2em;color:#FFD700;text-align:center;"></div>
      </div>
      <div id="game-history" class="game-history">
        <h4>Game History</h4>
        <div id="history-list"></div>
      </div>
      <button onclick="nextRound()">Next Round</button>
    </div>
  </div>

  <script src="punishments.js"></script>
  <script src="perks.js"></script>
  <script src="matchups.js"></script>
  <script src="script.js"></script>
</body>
</html>
